
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DonghuaWave - User Dashboard</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <header>
        <div class="container">
            <div class="logo">
                <h1>DonghuaWave</h1>
            </div>
            <nav>
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="#">New Releases</a></li>
                    <li><a href="#">Popular</a></li>
                    <li><a href="#">Genres</a></li>
                </ul>
            </nav>
            <div class="user-actions">
                <div class="search-box">
                    <input type="text" placeholder="Search...">
                    <button><i class="fas fa-search"></i></button>
                </div>
                <div class="user-menu">
                    <button class="user-menu-btn">
                        <img src="https://via.placeholder.com/40" alt="User" class="avatar">
                        <span>User</span>
                        <i class="fas fa-chevron-down"></i>
                    </button>
                    <div class="user-dropdown">
                        <ul>
                            <li><a href="user.html"><i class="fas fa-user"></i> Dashboard</a></li>
                            <li><a href="#"><i class="fas fa-cog"></i> Settings</a></li>
                            <li><a href="#" id="logout-btn"><i class="fas fa-sign-out-alt"></i> Logout</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <main class="dashboard">
        <div class="container">
            <h1>User Dashboard</h1>
            <div class="dashboard-grid">
                <div class="dashboard-sidebar">
                    <div class="user-info">
                        <img src="https://via.placeholder.com/100" alt="User Avatar" class="user-avatar">
                        <h2>User Name</h2>
                        <p class="user-email">user@example.com</p>
                        <div class="user-status free">Free User</div>
                        <button class="btn-upgrade">Upgrade to VIP</button>
                    </div>
                    <div class="sidebar-menu">
                        <ul>
                            <li class="active"><a href="#account"><i class="fas fa-user"></i> Account</a></li>
                            <li><a href="#bookmarks"><i class="fas fa-bookmark"></i> Bookmarks</a></li>
                            <li><a href="#history"><i class="fas fa-history"></i> Watch History</a></li>
                            <li><a href="#settings"><i class="fas fa-cog"></i> Settings</a></li>
                        </ul>
                    </div>
                </div>
                <div class="dashboard-content">
                    <section id="account" class="dashboard-section active">
                        <h2>Account Information</h2>
                        <div class="account-details">
                            <div class="detail-row">
                                <span class="detail-label">Username:</span>
                                <span class="detail-value">User123</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">Email:</span>
                                <span class="detail-value">user@example.com</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">Account Type:</span>
                                <span class="detail-value">Free</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">Joined:</span>
                                <span class="detail-value">May 1, 2025</span>
                            </div>
                        </div>
                        <div class="account-actions">
                            <button class="btn-secondary">Edit Profile</button>
                            <button class="btn-secondary">Change Password</button>
                        </div>
                    </section>
                    
                    <section id="bookmarks" class="dashboard-section">
                        <h2>Your Bookmarks</h2>
                        <div class="donghua-grid">
                            <!-- Bookmark items will be inserted here -->
                        </div>
                    </section>
                    
                    <section id="history" class="dashboard-section">
                        <h2>Watch History</h2>
                        <div class="history-list">
                            <!-- History items will be inserted here -->
                        </div>
                    </section>

                    <section id="settings" class="dashboard-section">
                        <h2>Account Settings</h2>
                        <form class="settings-form">
                            <div class="form-group">
                                <label for="notification">Notifications</label>
                                <div class="toggle">
                                    <input type="checkbox" id="notification" checked>
                                    <label for="notification" class="toggle-label"></label>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="autoplay">Autoplay Next Episode</label>
                                <div class="toggle">
                                    <input type="checkbox" id="autoplay" checked>
                                    <label for="autoplay" class="toggle-label"></label>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="quality">Default Video Quality</label>
                                <select id="quality">
                                    <option value="auto">Auto</option>
                                    <option value="1080p">1080p</option>
                                    <option value="720p">720p</option>
                                    <option value="480p">480p</option>
                                    <option value="360p">360p</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <button type="submit" class="btn-primary">Save Settings</button>
                            </div>
                        </form>
                    </section>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-logo">
                    <h2>DonghuaWave</h2>
                    <p>Your premier destination for Chinese animation</p>
                </div>
                <div class="footer-links">
                    <div class="footer-column">
                        <h3>Navigation</h3>
                        <ul>
                            <li><a href="index.html">Home</a></li>
                            <li><a href="#">New Releases</a></li>
                            <li><a href="#">Popular</a></li>
                            <li><a href="#">Genres</a></li>
                        </ul>
                    </div>
                    <div class="footer-column">
                        <h3>Account</h3>
                        <ul>
                            <li><a href="#">Dashboard</a></li>
                            <li><a href="#">Settings</a></li>
                            <li><a href="#">Upgrade to VIP</a></li>
                        </ul>
                    </div>
                    <div class="footer-column">
                        <h3>Legal</h3>
                        <ul>
                            <li><a href="#">Terms of Service</a></li>
                            <li><a href="#">Privacy Policy</a></li>
                            <li><a href="#">Copyright</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 DonghuaWave. All rights reserved.</p>
                <div class="social-links">
                    <a href="#"><i class="fab fa-facebook"></i></a>
                    <a href="#"><i class="fab fa-twitter"></i></a>
                    <a href="#"><i class="fab fa-instagram"></i></a>
                    <a href="#"><i class="fab fa-discord"></i></a>
                </div>
            </div>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Toggle user dropdown menu
            const userMenuBtn = document.querySelector('.user-menu-btn');
            const userDropdown = document.querySelector('.user-dropdown');
            
            userMenuBtn.addEventListener('click', () => {
                userDropdown.classList.toggle('active');
            });

            // Close dropdown when clicking outside
            document.addEventListener('click', (e) => {
                if (!e.target.closest('.user-menu')) {
                    userDropdown.classList.remove('active');
                }
            });

            // Handle logout
            const logoutBtn = document.getElementById('logout-btn');
            logoutBtn.addEventListener('click', (e) => {
                e.preventDefault();
                
                // Simulate logout and redirect
                setTimeout(() => {
                    window.location.href = 'index.html';
                }, 500);
                
                /* With Supabase:
                await supabase.auth.signOut();
                window.location.href = 'index.html';
                */
            });

            // Tab navigation
            const sidebarLinks = document.querySelectorAll('.sidebar-menu a');
            const dashboardSections = document.querySelectorAll('.dashboard-section');
            
            sidebarLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    
                    // Remove active class from all links and sections
                    sidebarLinks.forEach(l => l.parentElement.classList.remove('active'));
                    dashboardSections.forEach(s => s.classList.remove('active'));
                    
                    // Add active class to clicked link
                    link.parentElement.classList.add('active');
                    
                    // Show corresponding section
                    const targetId = link.getAttribute('href').substring(1);
                    document.getElementById(targetId).classList.add('active');
                });
            });

            // Sample bookmarks data
            const bookmarks = [
                {
                    id: 1,
                    title: "The King's Avatar",
                    poster: "https://via.placeholder.com/300x450?text=The+King's+Avatar",
                    episode: "Season 2, Ep 8"
                },
                {
                    id: 3,
                    title: "Battle Through The Heavens",
                    poster: "https://via.placeholder.com/300x450?text=Battle+Through+The+Heavens",
                    episode: "Season 4, Ep 12"
                },
                {
                    id: 5,
                    title: "Martial Universe",
                    poster: "https://via.placeholder.com/300x450?text=Martial+Universe",
                    episode: "Season 1, Ep 24"
                }
            ];
            
            // Sample history data
            const history = [
                {
                    id: 1,
                    title: "The King's Avatar",
                    episode: "S2 E8: Glory's Challenge",
                    poster: "https://via.placeholder.com/120x70?text=KA-S2E8",
                    watched: "Today, 12:30 PM",
                    progress: 75
                },
                {
                    id: 5,
                    title: "Martial Universe",
                    episode: "S1 E24: Ancient Tablet",
                    poster: "https://via.placeholder.com/120x70?text=MU-S1E24",
                    watched: "Yesterday, 8:15 PM",
                    progress: 100
                },
                {
                    id: 2,
                    title: "Soul Land",
                    episode: "S3 E15: Spirit Hall",
                    poster: "https://via.placeholder.com/120x70?text=SL-S3E15",
                    watched: "May 3, 2025",
                    progress: 50
                }
            ];

            // Populate bookmarks
            const bookmarkGrid = document.querySelector('#bookmarks .donghua-grid');
            let bookmarkHTML = '';
            
            if (bookmarks.length > 0) {
                bookmarks.forEach(bookmark => {
                    bookmarkHTML += `
                        <div class="donghua-card" data-id="${bookmark.id}">
                            <div class="poster">
                                <img src="${bookmark.poster}" alt="${bookmark.title}">
                                <div class="overlay">
                                    <div class="episode-tag">${bookmark.episode}</div>
                                    <a href="donghua.html?id=${bookmark.id}" class="btn-watch">Continue</a>
                                </div>
                            </div>
                            <div class="donghua-info">
                                <h3>${bookmark.title}</h3>
                                <div class="actions">
                                    <button class="btn-icon remove-bookmark" data-id="${bookmark.id}">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    `;
                });
            } else {
                bookmarkHTML = '<p class="empty-state">You have no bookmarks yet.</p>';
            }
            
            bookmarkGrid.innerHTML = bookmarkHTML;

            // Populate watch history
            const historyList = document.querySelector('#history .history-list');
            let historyHTML = '';
            
            if (history.length > 0) {
                history.forEach(item => {
                    historyHTML += `
                        <div class="history-item">
                            <div class="history-poster">
                                <img src="${item.poster}" alt="${item.title}">
                            </div>
                            <div class="history-details">
                                <h4>${item.title}</h4>
                                <p>${item.episode}</p>
                                <div class="history-meta">
                                    <span class="watched-at">${item.watched}</span>
                                    <div class="progress-bar">
                                        <div class="progress" style="width: ${item.progress}%"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="history-actions">
                                <a href="episode.html?id=${item.id}" class="btn-resume">
                                    <i class="fas fa-play"></i>
                                </a>
                                <button class="btn-icon remove-history" data-id="${item.id}">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                        </div>
                    `;
                });
            } else {
                historyHTML = '<p class="empty-state">Your watch history is empty.</p>';
            }
            
            historyList.innerHTML = historyHTML;
        });
    </script>
</body>
</html>
